<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronology Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f4f4f4;
        }

        .top-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
        }

        .top-panel button {
            background-color: white;
            color: #4CAF50;
            border: none;
            padding: 8px 16px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .top-panel button:hover {
            background-color: #ddd;
        }

        .game-container {
            display: flex;
            margin-top: 60px; /* To make space for the fixed top panel */
            flex: 1;
            width: 100%;
        }

        .left-panel, .right-panel {
            overflow-y: scroll;
            height: calc(100vh - 60px); /* Adjusted for the height of the top panel */
        }

        .left-panel {
            width: 30%;
            background-color: #ffffff;
            border-right: 2px solid #ddd;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .right-panel {
            width: 70%;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dates, .events {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .date-box {
            background-color: #e0e0e0;
            border: 2px dashed #888;
            padding: 15px;
            text-align: center;
            font-size: 16px;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
        }

        .date-box.correct {
            background-color: #a8e6a1; /* Green for correct */
            border-color: #388e3c;
        }

        .incorrect-message {
            color: red;
            font-size: 14px;
            position: absolute;
            top: 50%;
            right: -120px; /* Moves to the right of the date box */
            transform: translateY(-50%);
            display: none;
        }

        .event-box {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            cursor: grab;
            text-align: center;
            font-size: 16px;
            transition: transform 0.2s ease;
        }

        .event-box:hover {
            transform: scale(1.05);
        }

        .win-message {
            color: green;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            position: fixed;
            right: 50%;
            top: 50%;
            transform: translate(50%, -50%);
            display: none; /* Initially hidden */
            padding: 10px 20px;
            background-color: white;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Mobile-friendly adjustments */
        @media (max-width: 600px) {
            .left-panel {
                width: 40%;
            }

            .right-panel {
                width: 60%;
            }

            .date-box, .event-box {
                font-size: 14px;
                padding: 10px;
            }

            .incorrect-message {
                right: -90px;
            }
        }
    </style>
</head>
<body>
    <div class="top-panel">
        <span>Chronology Game</span>
        <span>Drag & Drop the Events</span>
        <button onclick="history.back()">Back</button>
    </div>

    <div class="game-container">
        <div class="left-panel">
            <div id="dates" class="dates"></div>
        </div>

        <div class="right-panel">
            <div id="events" class="events"></div>
        </div>
    </div>

    <div id="winMessage" class="win-message">You Won!</div>

    <script>
        const dates = [
            '1969', '1989', '2007', '1994',
            '1776', '1914', '1492', '1945',
            '1963', '1865'
        ];

        const events = [
            'The Moon Landing',
            'The Fall of the Berlin Wall',
            'The Launch of the First iPhone',
            'The First Text Message Sent',
            'American Independence',
            'Start of World War I',
            'Columbus Discovers America',
            'End of World War II',
            'Martin Luther King’s "I Have a Dream" Speech',
            'Abolition of Slavery in the US'
        ];

        const dateEventMap = {
            '1969': 'The Moon Landing',
            '1989': 'The Fall of the Berlin Wall',
            '2007': 'The Launch of the First iPhone',
            '1994': 'The First Text Message Sent',
            '1776': 'American Independence',
            '1914': 'Start of World War I',
            '1492': 'Columbus Discovers America',
            '1945': 'End of World War II',
            '1963': 'Martin Luther King’s "I Have a Dream" Speech',
            '1865': 'Abolition of Slavery in the US'
        };

        const dateContainer = document.getElementById('dates');
        const eventContainer = document.getElementById('events');
        const winMessage = document.getElementById('winMessage');

        let shuffledEvents = [];

        function initGame() {
            shuffledEvents = [...events].sort(() => Math.random() - 0.5);

            dateContainer.innerHTML = '';
            dates.forEach((date) => {
                const dateBox = document.createElement('div');
                dateBox.className = 'date-box';
                dateBox.dataset.date = date;
                dateBox.ondragover = allowDrop;
                dateBox.ondrop = dropEvent;
                dateBox.innerHTML = `
                    <strong>${date}</strong>
                    <div class="event-slot"></div>
                    <div class="incorrect-message">Incorrect!</div>
                `;
                dateContainer.appendChild(dateBox);
            });

            eventContainer.innerHTML = '';
            shuffledEvents.forEach((event) => {
                const eventBox = document.createElement('div');
                eventBox.className = 'event-box';
                eventBox.draggable = true;
                eventBox.dataset.event = event;
                eventBox.ondragstart = dragEvent;
                eventBox.innerText = event;
                eventContainer.appendChild(eventBox);
            });
        }

        function allowDrop(event) {
            event.preventDefault();
        }

        function dragEvent(event) {
            event.dataTransfer.setData('text/plain', event.target.dataset.event);
        }

        function dropEvent(event) {
            event.preventDefault();
            const draggedEvent = event.dataTransfer.getData('text/plain');
            const targetDateBox = event.target.closest('.date-box');

            if (targetDateBox) {
                const targetDate = targetDateBox.dataset.date;
                const slot = targetDateBox.querySelector('.event-slot');
                const incorrectMessage = targetDateBox.querySelector('.incorrect-message');

                if (dateEventMap[targetDate] === draggedEvent) {
                    slot.innerText = draggedEvent;
                    slot.classList.add('correct');
                    const eventElement = document.querySelector(`.event-box[data-event='${draggedEvent}']`);
                    if (eventElement) {
                        eventElement.remove();
                    }
                    incorrectMessage.style.display = 'none';
                } else {
                    incorrectMessage.style.display = 'block';
                    setTimeout(() => (incorrectMessage.style.display = 'none'), 2000);
                }

                checkWin();
            }
        }

        function checkWin() {
            const remainingEvents = document.querySelectorAll('.event-box');
            if (remainingEvents.length === 0) {
                winMessage.style.display = 'block';
            }
        }

        initGame();
    </script>
</body>
</html>
